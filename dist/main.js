const l=({selector:t,callback:e=()=>{}})=>{const r=new MutationObserver(function(){const o=document.querySelector(t);o&&(e==null||e(o),r.disconnect())});r.observe(document,{attributes:!1,childList:!0,characterData:!1,subtree:!0})};console.log("waitForPage");l({selector:".b-loginreg__form",callback:t=>{t&&(console.log("formEl",t),t.classList.add("cl-hidden"),chrome.runtime.onMessage.addListener(function(e,r,o){var c,a;if(console.log("request",e),e.type==="CREDENTIALS"){const n=document.querySelector('[name="email"]');console.log("emailInput",n),n&&(n.value=(c=e==null?void 0:e.payload)==null?void 0:c.email,console.log("request",e),n.dispatchEvent(new Event("input",{bubbles:!0})));const i=document.querySelector('[name="password"]');i&&(i.value=(a=e==null?void 0:e.payload)==null?void 0:a.password,i.dispatchEvent(new Event("input",{bubbles:!0})));const s=document.querySelector('[type="submit"]');s&&setTimeout(()=>{s.click();const u=setTimeout(()=>{o({success:!1})},5e3);return l({selector:".l-header",callback:()=>{clearTimeout(u),o({success:!0})}}),l({selector:".error_place_form",callback:()=>{clearTimeout(u),o({success:!1})}}),!0},1e3)}}))}});chrome.runtime.onMessage.addListener(function(t,e,r){if(t.type==="HANDLE"){const o=setInterval(()=>{var n;const c=document.querySelector(".g-user-username"),a=(n=c==null?void 0:c.innerText)==null?void 0:n.replace("@","").trim();a&&(r(a),clearInterval(o))},1e3);return!0}if(t.type==="REFRESH"&&location.reload(!0),t.type==="PING")return r(!0),!0});console.log("[MAIN CONTENT SCRIPT INIT]");
